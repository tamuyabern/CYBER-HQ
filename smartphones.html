<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smartphones - HQ TECH & CYBER</title>
<style>
  /* --- Include your existing CSS from home page here --- */
  /* Make sure to keep the cart styles, floating buttons, and .card styles */
</style>
</head>
<body>
<header>
  <!-- Minimal nav -->
  <nav>
    <a href="index.html">Home</a>
  </nav>
</header>

<main class="wrap">
  <section>
    <h2>Smartphones</h2>
    <div class="grid">
      <!-- Example product card 1 -->
      <article class="card">
        <img src="https://images.unsplash.com/photo-1616348436168-de43ad0db179?w=1200&q=60&auto=format&fit=crop" alt="Smartphone 1">
        <div class="pad">
          <h3>Smartphone Model 1</h3>
          <p>Latest features and performance.</p>
          <div class="price">KSh 7,000</div>
          <button class="btn-blue add-cart" data-name="Smartphone Model 1" data-price="7000">Add to Cart</button>
        </div>
      </article>

      <!-- Product card 2 -->
      <article class="card">
        <img src="https://images.unsplash.com/photo-1616348436168-de43ad0db179?w=1200&q=60&auto=format&fit=crop" alt="Smartphone 2">
        <div class="pad">
          <h3>Smartphone Model 2</h3>
          <p>High performance, dual cameras.</p>
          <div class="price">KSh 12,500</div>
          <button class="btn-blue add-cart" data-name="Smartphone Model 2" data-price="12500">Add to Cart</button>
        </div>
      </article>

      <!-- Add more cards as needed (up to 10) -->
    </div>
  </section>
</main>

<!-- Floating Cart Button + Modal -->
<button class="cart-btn" aria-label="Open cart">ðŸ›’ <span class="cart-badge">0</span></button>
<div id="cartOverlay" aria-hidden="true">
  <div class="cart-modal">
    <div class="cart-head">
      <h3>Your Cart</h3>
      <button class="close-cart">âœ•</button>
    </div>
    <div class="cart-body">
      <div class="cart-items"></div>
      <div class="totals">
        <span>Total:</span><span class="cart-total">KSh 0</span>
      </div>
      <div class="pay-actions">
        <button class="pay-mpesa">Pay with M-Pesa</button>
        <button class="pay-card">Pay with Card</button>
        <button class="pay-bank">Pay with Bank</button>
      </div>
    </div>
  </div>
</div>

<!-- Floating WhatsApp -->
<a href="https://wa.me/254726717361?text=Hello%20HQ%20CYBER" class="whatsapp-float" target="_blank">ðŸ’¬</a>

<script>
/* ======= Cart JS (copy exactly from home page) ======= */
const cartBtn = document.querySelector('.cart-btn');
const cartOverlay = document.getElementById('cartOverlay');
const cartItemsEl = document.querySelector('.cart-items');
const cartTotalEl = document.querySelector('.cart-total');
const cartBadge = document.querySelector('.cart-badge');
const closeCartBtn = document.querySelector('.close-cart');

let cart = [];
try { cart = JSON.parse(localStorage.getItem('hqCart') || '[]'); } catch(e){ cart=[]; }

function updateCartUI(){
  cartItemsEl.innerHTML = '';
  let total = 0;
  cart.forEach((item, idx) => {
    const row = document.createElement('div');
    row.className = 'cart-row';
    row.innerHTML = `
      <span style="font-weight:600">${escapeHtml(item.name)}</span>
      <div class="qty">
        <button class="dec">-</button>
        <span>${item.qty}</span>
        <button class="inc">+</button>
      </div>
      <span>KSh ${formatNumber(item.price * item.qty)}</span>
      <button class="remove">Remove</button>
    `;
    cartItemsEl.appendChild(row);

    row.querySelector('.inc').addEventListener('click', ()=>{ item.qty++; updateCartUI(); });
    row.querySelector('.dec').addEventListener('click', ()=>{ if(item.qty>1) item.qty--; else cart.splice(idx,1); updateCartUI(); });
    row.querySelector('.remove').addEventListener('click', ()=>{ cart.splice(idx,1); updateCartUI(); });

    total += item.price * item.qty;
  });
  cartTotalEl.textContent = 'KSh ' + formatNumber(total);
  cartBadge.textContent = cart.reduce((s,i)=>s+i.qty,0);
  localStorage.setItem('hqCart', JSON.stringify(cart));
}

/* Add-to-cart buttons */
document.querySelectorAll('.add-cart').forEach(btn => {
  btn.addEventListener('click', ()=>{
    const name = btn.dataset.name;
    const price = parseInt(btn.dataset.price) || 0;
    const existing = cart.find(i=>i.name===name);
    if(existing) existing.qty++; else cart.push({name, price, qty:1});
    updateCartUI();
  });
});

/* Cart open/close */
cartBtn.addEventListener('click', ()=>{ cartOverlay.style.display='flex'; cartOverlay.setAttribute('aria-hidden','false'); });
closeCartBtn.addEventListener('click', ()=>{ cartOverlay.style.display='none'; cartOverlay.setAttribute('aria-hidden','true'); });
cartOverlay.addEventListener('click', (e)=>{ if(e.target===cartOverlay){ cartOverlay.style.display='none'; cartOverlay.setAttribute('aria-hidden','true'); } });

/* Helpers */
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
function formatNumber(n){ return n.toLocaleString(); }

updateCartUI();
</script>
</body>
</html>
