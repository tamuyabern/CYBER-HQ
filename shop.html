<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HQ TECH & CYBER</title>
<style>
:root{
  --bg:#f9fafc; --fg:#1a1d29; --muted:#5b6370; --card:#fff;
  --accent:#2563eb; --accent-hover:#1d4ed8; --whatsapp:#25D366;
  --shadow-pink: rgba(255,20,147,0.45);
  --shadow-purple: rgba(147,51,234,0.55);
}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--fg);line-height:1.5;margin:0;padding:0}
header{position:sticky;top:0;background:#fff;border-bottom:1px solid #e5e7eb;z-index:1000;padding:12px 0;text-align:center;font-weight:700;display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
nav button{background:none;border:none;font-weight:700;font-size:16px;margin-left:10px;cursor:pointer;color:var(--accent)}
nav button:hover{color:var(--accent-hover)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;margin:16px 0}
.card{position:relative;background:var(--card);border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;transition:transform .28s, box-shadow .28s}
.card:hover{transform:translateY(-6px);box-shadow:0 10px 28px var(--shadow-purple),0 0 18px var(--shadow-pink)}
.card img{width:100%;height:150px;object-fit:cover}
.card-body{padding:12px;text-align:center}
.card-body h4{margin:6px 0;font-size:16px}
.price{color:#059669;font-weight:700;margin-top:4px}
.sale-badge{position:absolute;top:8px;left:8px;background:#ef4444;color:#fff;font-weight:700;padding:4px 8px;border-radius:6px;font-size:12px;z-index:2}
.cart-icon{position:absolute;bottom:8px;right:8px;background:#2563eb;border:none;border-radius:50%;padding:6px;cursor:pointer}
.cart-icon img{width:20px;height:20px}
#cartBtn{position:fixed;bottom:18px;right:18px;background:var(--accent);color:#fff;border:none;border-radius:50%;padding:14px 16px;font-size:20px;cursor:pointer;z-index:2000}
#cartBadge{position:absolute;top:-6px;right:-6px;background:red;color:#fff;border-radius:50%;padding:2px 6px;font-size:12px;font-weight:700}
#cartOverlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);align-items:center;justify-content:center;z-index:1500}
.cart-modal{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:80vh;overflow:auto;box-shadow:0 18px 40px rgba(0,0,0,.25)}
.cart-head{display:flex;justify-content:space-between;padding:16px;border-bottom:1px solid #eee}
.cart-body{padding:14px}
.cart-items{display:flex;flex-direction:column;gap:12px}
.cart-row{display:grid;grid-template-columns:1fr auto auto auto;gap:8px;align-items:center;border-bottom:1px dashed #e5e7eb;padding:6px 0}
.qty{display:flex;align-items:center;gap:6px}
.qty button{width:28px;height:28px;border:1px solid #e5e7eb;background:#fff;border-radius:6px;cursor:pointer}
.remove{border:none;background:#ef4444;color:#fff;border-radius:6px;padding:4px 6px;cursor:pointer}
.totals{display:flex;justify-content:space-between;margin-top:10px;font-weight:700}
.pay-actions{display:grid;gap:8px;margin-top:12px}
.pay-actions button{padding:10px;border:none;border-radius:10px;font-weight:700;color:#fff;cursor:pointer}
.pay-mpesa{background:#10b981}
.pay-card{background:#2563eb}
.pay-bank{background:#f59e0b}
.close-cart{border:none;background:#111827;color:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
.fly-img{position:fixed;z-index:2000;pointer-events:none;width:70px;height:70px;border-radius:8px;object-fit:cover;transition:opacity .2s;animation:flyToCart .7s forwards}
@keyframes flyToCart{to{transform:translate(var(--tx),var(--ty)) scale(0.08);opacity:0;}}
</style>
</head>
<body>

<header>
  <span>HQ TECH & CYBER</span>
  <nav>
    <button onclick="showHome()">Home</button>
    <button onclick="showShop()">Shop</button>
  </nav>
</header>

<main id="mainContent" style="padding:16px;"></main>

<!-- Cart Button -->
<button id="cartBtn">ðŸ›’ <span id="cartBadge">0</span></button>

<!-- Cart Modal -->
<div id="cartOverlay" aria-hidden="true">
  <div class="cart-modal">
    <div class="cart-head">
      <h3>Your Cart</h3>
      <button class="close-cart">âœ•</button>
    </div>
    <div class="cart-body">
      <div class="cart-items"></div>
      <div class="totals"><span>Total:</span><span class="cart-total">KES 0</span></div>
      <div class="pay-actions">
        <button class="pay-mpesa">Pay with M-Pesa</button>
        <button class="pay-card">Pay with Card</button>
        <button class="pay-bank">Pay with Bank</button>
      </div>
    </div>
  </div>
</div>

<script>
const mainContent=document.getElementById('mainContent');
const cartBtn=document.getElementById('cartBtn');
const cartOverlay=document.getElementById('cartOverlay');
const cartItemsEl=document.querySelector('.cart-items');
const cartTotalEl=document.querySelector('.cart-total');
const cartBadge=document.getElementById('cartBadge');
const closeCartBtn=document.querySelector('.close-cart');
const cartImg='https://cdn-icons-png.flaticon.com/512/1170/1170678.png';
let cart=[];

try{cart=JSON.parse(localStorage.getItem('hqCart')||'[]')}catch(e){cart=[]}

const categories=[
  {name:'Smartphones',items:Array.from({length:6},(_,i)=>({id:i,name:`Smartphone ${i+1}`,img:`https://picsum.photos/300/200?random=${i+1}`,price:7000+i*500,addCart:true}))},
  {name:'Accessories',items:Array.from({length:8},(_,i)=>({id:100+i,name:`Accessory ${i+1}`,img:`https://picsum.photos/300/200?random=${100+i}`,price:500+i*50,addCart:true}))},
  {name:'Digital Services',items:[{id:200,name:'Digital Service',img:'https://picsum.photos/300/200?random=200',price:0,addCart:false}]},
  {name:"Men's Wear",items:Array.from({length:6},(_,i)=>({id:300+i,name:`Men's Wear ${i+1}`,img:`https://picsum.photos/300/200?random=${300+i}`,price:1200+i*100,addCart:true}))},
  {name:"Lady's Wear",items:Array.from({length:8},(_,i)=>({id:400+i,name:`Lady's Wear ${i+1}`,img:`https://picsum.photos/300/200?random=${400+i}`,price:1500+i*100,addCart:true}))},
];

function updateCartUI(){
  cartItemsEl.innerHTML='';
  let total=0;
  cart.forEach((item,idx)=>{
    const row=document.createElement('div');
    row.className='cart-row';
    row.innerHTML=`<span style="font-weight:600">${item.name}</span>
      <div class="qty">
        <button class="dec">-</button>
        <span>${item.qty}</span>
        <button class="inc">+</button>
      </div>
      <span>KES ${item.price*item.qty}</span>
      <button class="remove">Remove</button>`;
    cartItemsEl.appendChild(row);
    row.querySelector('.inc').addEventListener('click',()=>{item.qty++;updateCartUI()});
    row.querySelector('.dec').addEventListener('click',()=>{if(item.qty>1){item.qty--}else{cart.splice(idx,1)};updateCartUI()});
    row.querySelector('.remove').addEventListener('click',()=>{cart.splice(idx,1);updateCartUI()});
    total+=item.price*item.qty;
  });
  cartTotalEl.textContent='KES '+total.toLocaleString();
  cartBadge.textContent=cart.reduce((s,i)=>s+i.qty,0);
  localStorage.setItem('hqCart',JSON.stringify(cart));
}

function addToCart(id){
  categories.forEach(cat=>{
    const p=cat.items.find(i=>i.id===id);
    if(p){
      const existing=cart.find(i=>i.id===id);
      if(existing) existing.qty++; else cart.push({...p,qty:1});
      updateCartUI();
      const imgEl=document.querySelector(`img[src='${p.img}']`);
      if(imgEl){
        const fly=document.createElement('img');
        fly.src=p.img;fly.className='fly-img';
        document.body.appendChild(fly);
        const imgRect=imgEl.getBoundingClientRect();
        const cartRect=cartBtn.getBoundingClientRect();
        fly.style.left=(imgRect.left+imgRect.width/2-35)+'px';
        fly.style.top=(imgRect.top+imgRect.height/2-35)+'px';
        fly.style.setProperty('--tx',cartRect.left+(cartRect.width/2)-(imgRect.left+imgRect.width/2)+'px');
        fly.style.setProperty('--ty',cartRect.top+(cartRect.height/2)-(imgRect.top+imgRect.height/2)+'px');
        setTimeout(()=>fly.remove(),800);
      }
    }
  });
}

function renderShop(){
  mainContent.innerHTML='';
  categories.forEach(cat=>{
    const catDiv=document.createElement('div');
    catDiv.innerHTML=`<h3>${cat.name}</h3><div class="grid"></div>`;
    const grid=catDiv.querySelector('.grid');
    let saleIndices=[];
    if(cat.items.length>1){let count=Math.min(2,cat.items.length);while(saleIndices.length<count){let rand=Math.floor(Math.random()*cat.items.length);if(!saleIndices.includes(rand)) saleIndices.push(rand)}}
    cat.items.forEach((p,index)=>{
      const card=document.createElement('div');card.className='card';
      const showSale=p.addCart&&saleIndices.includes(index);
      card.innerHTML=`<img src="${p.img}" alt="${p.name}">${showSale?`<span class="sale-badge">Sale</span>`:''}
      <div class="card-body">
        <h4>${p.name}</h4>
        ${p.price>0?`<p class="price">KES ${p.price.toLocaleString()}</p>`:''}
        ${p.addCart?`<button class="cart-icon" onclick="addToCart(${p.id})"><img src="${cartImg}" alt="Add to cart"></button>`:''}
      </div>`;
      grid.appendChild(card);
    });
    mainContent.appendChild(catDiv);
  });
}

function showHome(){
  mainContent.innerHTML='<h2>Welcome to HQ TECH & CYBER</h2><p>Click Shop to explore products.</p>';
}

function showShop(){
  renderShop();
}

cartBtn.addEventListener('click',()=>{cartOverlay.style.display='flex';cartOverlay.setAttribute('aria-hidden','false')});
closeCartBtn.addEventListener('click',()=>{cartOverlay.style.display='none';cartOverlay.setAttribute('aria-hidden','true')});
cartOverlay.addEventListener('click',e=>{if(e.target===cartOverlay){cartOverlay.style.display='none'}});
showHome();updateCartUI();
</script>

</body>
</html>
