<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HQ Marketplace</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f9f9f9;
  }

  header {
    background: #333;
    color: #fff;
    padding: 10px;
    text-align: center;
  }

  #searchBar {
    width: 80%;
    padding: 8px;
    margin: 10px auto;
    display: block;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  #actions {
    text-align: center;
    margin-bottom: 10px;
  }
  #actions button {
    background: blue;
    color: #fff;
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  #products {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    padding: 15px;
    justify-items: center;
  }

  .card {
    width: 200px;
    height: 280px;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    cursor: pointer;
  }

  .card img {
    width: 100%;
    height: 160px;
    object-fit: cover;
  }

  .card-body {
    flex: 1;
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 100px;
  }

  .card-title {
    font-size: 16px;
    font-weight: bold;
    margin: 0 0 5px;
    text-align: center;
  }

  /* Phone number box */
  .phone {
    display: block;
    background: orange;
    color: black;
    padding: 8px 12px;
    border-radius: 8px;
    border: 2px solid #e69500;
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    margin-top: 8px;
    transition: 0.3s ease;
  }
  .phone:hover {
    background: darkorange;
    color: white;
  }

  /* Disabled phone box */
  .phone-disabled {
    display: block;
    background: #ddd;
    color: #777;
    padding: 8px 12px;
    border-radius: 8px;
    border: 2px solid #ccc;
    font-weight: bold;
    text-align: center;
    margin-top: 8px;
    pointer-events: none;
  }

  /* Product detail modal */
  #productDetail {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  #productDetail .content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    text-align: center;
  }
  #productDetail img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
  }
  #closeDetail {
    margin-top: 15px;
    display: inline-block;
    padding: 8px 15px;
    background: #333;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    text-decoration: none;
  }

  /* Add Product Modal */
  #addProductModal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
    z-index: 2000;
  }

  #addProductModal .add-content {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    text-align: center;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
  }

  #addProductModal h2 {
    margin-bottom: 15px;
  }

  #addProductModal form input,
  #addProductModal form textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
  }

  #addProductModal .actions {
    display: flex;
    justify-content: space-between;
    gap: 10px;
  }

  #addProductModal button {
    flex: 1;
    padding: 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }

  #addProductModal button[type="submit"] {
    background: green;
    color: white;
  }

  #addProductModal button[type="button"] {
    background: #ccc;
    color: black;
  }
</style>
</head>
<body>

<header>
  <h1>HQ Marketplace</h1>
</header>

<input type="text" id="searchBar" placeholder="Search products...">

<div id="actions">
  <button onclick="openAddProduct()">+ Add Product</button>
</div>

<section id="products">
  <!-- Example product -->
  <div class="card" onclick="showDetail('Product 1','https://via.placeholder.com/200x160','This is product 1 description','0700000000')">
    <img src="https://via.placeholder.com/200x160" alt="Product 1">
    <div class="card-body">
      <h2 class="card-title">Product 1</h2>
      <a href="tel:0700000000" class="phone">0700000000</a>
      <!-- <span class="phone-disabled">Show Phone Number</span> -->
    </div>
  </div>
</section>

<!-- Product Detail Modal -->
<div id="productDetail">
  <div class="content">
    <h2 id="detailTitle"></h2>
    <img id="detailImage" src="" alt="">
    <p id="detailDescription"></p>
    <a id="detailPhone" href="#" class="phone"></a>
    <span id="detailPhoneDisabled" class="phone-disabled" style="display:none;">Show Phone Number</span>
    <a id="closeDetail" onclick="closeDetail()">Close</a>
  </div>
</div>

<!-- Add Product Modal -->
<div id="addProductModal">
  <div class="add-content">
    <h2>Add Product</h2>
    <form id="addProductForm">
      <input type="text" id="productName" placeholder="Product Name" required>
      <input type="url" id="productImage" placeholder="Image URL" required>
      <textarea id="productDescription" placeholder="Description" required></textarea>
      <input type="tel" id="productPhone" placeholder="Phone Number" required>
      <div class="actions">
        <button type="submit">Save</button>
        <button type="button" onclick="closeAddProduct()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
  const searchBar = document.getElementById("searchBar");
  const productsContainer = document.getElementById("products");

  searchBar.addEventListener("input", function() {
    const term = this.value.toLowerCase();
    const products = productsContainer.querySelectorAll(".card");
    products.forEach(card => {
      const title = card.querySelector(".card-title").textContent.toLowerCase();
      card.style.display = title.includes(term) ? "flex" : "none";
    });
  });

  function showDetail(title, img, desc, phone) {
    document.getElementById("detailTitle").textContent = title;
    document.getElementById("detailImage").src = img;
    document.getElementById("detailDescription").textContent = desc;

    const loggedIn = true; // change to false to test disabled state
    if (loggedIn) {
      document.getElementById("detailPhone").style.display = "block";
      document.getElementById("detailPhone").textContent = phone;
      document.getElementById("detailPhone").href = "tel:" + phone;
      document.getElementById("detailPhoneDisabled").style.display = "none";
    } else {
      document.getElementById("detailPhone").style.display = "none";
      document.getElementById("detailPhoneDisabled").style.display = "block";
    }

    document.getElementById("productDetail").style.display = "flex";
  }

  function closeDetail() {
    document.getElementById("productDetail").style.display = "none";
  }

  function openAddProduct() {
    document.getElementById("addProductModal").style.display = "flex";
  }

  function closeAddProduct() {
    document.getElementById("addProductModal").style.display = "none";
  }

  document.getElementById("addProductForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const name = document.getElementById("productName").value;
    const image = document.getElementById("productImage").value;
    const desc = document.getElementById("productDescription").value;
    const phone = document.getElementById("productPhone").value;

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${image}" alt="${name}">
      <div class="card-body">
        <h2 class="card-title">${name}</h2>
        <a href="tel:${phone}" class="phone">${phone}</a>
      </div>
    `;
    card.onclick = () => showDetail(name, image, desc, phone);
    productsContainer.appendChild(card);

    closeAddProduct();
    this.reset();
  });
</script>

</body>
</html>
