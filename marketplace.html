<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HQ Marketplace</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f9f9f9; }
  header { background:#0a8f3d; color:white; padding:1rem; text-align:center; position:sticky; top:0; z-index:10; }
  header h1 { margin:0; }

  .actions { display:flex; justify-content:center; gap:1rem; margin:10px 0; flex-wrap:wrap; align-items:center; }
  .action-btn { background:orange; color:black; border:none; padding:6px 14px; border-radius:20px; cursor:pointer; font-weight:bold; }
  .action-btn:hover { background:darkorange; }
  .sign-btn { background:#1da1f2; color:white; }

  .categories { display:flex; overflow-x:auto; gap:8px; padding:10px; background:#eaf7ed; }
  .category { flex:0 0 auto; background:white; border:1px solid #0a8f3d; border-radius:20px; padding:6px 14px; cursor:pointer; }
  .category.active { background:#0a8f3d; color:white; }

  /* Search & filter */
  .search-bar { display:flex; justify-content:center; padding:10px; }
  .search-bar input { padding:8px 10px; width:300px; border-radius:6px; border:1px solid #ccc; transition:0.3s ease; }
  .search-bar input:focus { outline:none; border-color:#0a8f3d; box-shadow:0 0 8px rgba(10,143,61,0.5); }

  .filters { display:flex; flex-wrap:wrap; gap:6px; justify-content:center; padding:10px; }
  .filters input, .filters select, .filters button { padding:4px 6px; border-radius:6px; border:1px solid #ccc; font-size:14px; transition:0.3s ease; }
  .filters input:focus, .filters select:focus { outline:none; border-color:#0a8f3d; box-shadow:0 0 8px rgba(10,143,61,0.5); }

  /* Grid Layout */
  .container { 
    padding:2rem 1rem; 
    display:grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap:1.5rem; 
    justify-content: center; 
  }
  @media (max-width:480px) { .container { grid-template-columns: repeat(2, 1fr); } }
  @media (min-width:481px) and (max-width:768px) { .container { grid-template-columns: repeat(3, 1fr); } }
  @media (min-width:769px) and (max-width:1024px) { .container { grid-template-columns: repeat(4, 1fr); } }
  @media (min-width:1025px) { .container { grid-template-columns: repeat(5, 1fr); } }

  .card { background:white; border-radius:10px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.15); cursor:pointer; text-align:center; transition:0.3s ease; display:flex; flex-direction:column; }
  .card:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.2); }
  .card img { width:100%; height:160px; object-fit:contain; background:#fff; }
  .card-body { padding:0.5rem; flex:1; }
  .card-body h3 { margin:4px 0; font-size:1rem; display:flex; align-items:center; justify-content:center; gap:4px; }
  .phone { background:orange; color:black; padding:5px 8px; border-radius:6px; text-decoration:none; font-weight:bold; display:inline-block; }

  /* Floating Add Button */
  .fab { position:fixed; bottom:20px; right:20px; background:#0a8f3d; color:white; border:none; border-radius:50%; width:55px; height:55px; font-size:28px; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,0.3); display:flex; align-items:center; justify-content:center; z-index:1100; }
  .fab:hover { transform:scale(1.1); background:#0c6f2f; }

  /* Modals */
  .modal { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; }
  .modal-content { background:white; padding:1rem; border-radius:10px; width:95%; max-width:520px; max-height:90vh; overflow-y:auto; position:relative; }
  .modal-content h2 { margin-top:0; color:#0a8f3d; }
  .close { position:absolute; top:8px; right:12px; cursor:pointer; font-size:1.4rem; color:red; }

  /* Professional Add Product Modal */
  #formModal .modal-content {
    background: #ffffff;
    border-radius: 12px;
    width: 95%;
    max-width: 520px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    padding: 1.5rem;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3), 0 0 15px rgba(10,143,61,0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  #formModal .modal-content:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.4), 0 0 20px rgba(10,143,61,0.35);
  }
  #formModal h2 {
    text-align: center;
    color: #0a8f3d;
    margin-bottom: 1rem;
    text-shadow: 0 0 8px rgba(10,143,61,0.7);
  }
  #formModal input, #formModal select, #formModal textarea {
    width: 100%;
    margin-bottom: 10px;
    padding: 8px 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    transition: 0.3s ease;
  }
  #formModal input:focus, #formModal select:focus, #formModal textarea:focus {
    border-color: #0a8f3d;
    box-shadow: 0 0 8px rgba(10,143,61,0.5);
    outline: none;
  }
  #formModal .submit-btn {
    background: #0a8f3d;
    color: white;
    padding: 12px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    width: 100%;
    font-size: 16px;
    transition: 0.3s ease;
  }
  #formModal .submit-btn:hover {
    background: #0c6f2f;
    box-shadow: 0 0 12px rgba(10,143,61,0.7);
  }

  /* Image previews */
  #imagePreviewContainer { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; }
  #imagePreviewContainer img { width:100px; height:100px; object-fit:cover; background:#fff; border-radius:6px; border:1px solid #ccc; }

  /* Verified Badge */
  .verified { color:#1da1f2; font-size:16px; }
  .user-info { display:flex; align-items:center; gap:6px; }

  /* Carousel in detail modal */
  .carousel { display:flex; overflow-x:auto; gap:8px; }
  .carousel img { width:100%; max-height:300px; object-fit:contain; background:#fff; border-radius:8px; flex:0 0 100%; cursor:pointer; }

  /* Lightbox fullscreen */
  #lightbox { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:2000; }
  #lightbox img { max-width:90%; max-height:90%; object-fit:contain; border-radius:6px; }
</style>
</head>
<body>
<header>
  <h1>HQ Marketplace</h1>
  <div class="actions">
    <button class="action-btn" onclick="window.location.href='index.html'">⬅ Back to Home</button>
    <button class="action-btn sign-btn" id="signBtn" onclick="googleSign()">Sign In</button>
    <span id="userEmail" class="user-info" style="display:none;"></span>
  </div>
</header>

<!-- Search -->
<div class="search-bar">
  <input type="text" id="searchName" placeholder="Search product..." oninput="applySearch()" />
</div>

<!-- Filters -->
<div class="filters">
  <input type="number" id="minPrice" placeholder="Min Price" />
  <input type="number" id="maxPrice" placeholder="Max Price" />
  <select id="sortOrder">
    <option value="newest">Newest</option>
    <option value="priceAsc">Price Low → High</option>
    <option value="priceDesc">Price High → Low</option>
  </select>
  <button onclick="applyFilters()">Apply</button>
</div>

<div class="categories" id="categories">
  <div class="category active" onclick="filterCategory('all', this)">All</div>
  <div class="category" onclick="filterCategory('Phones', this)">Phones</div>
  <div class="category" onclick="filterCategory('Cars', this)">Cars</div>
  <div class="category" onclick="filterCategory('Kitchen', this)">Kitchen</div>
  <div class="category" onclick="filterCategory('Electronics', this)">Electronics</div>
  <div class="category" onclick="filterCategory('Furniture', this)">Furniture</div>
  <div class="category" onclick="filterCategory('Others', this)">Others</div>
</div>

<div class="container" id="products"></div>
<button class="fab" onclick="openForm()">+</button>

<div class="modal" id="detailModal">
  <div class="modal-content">
    <span class="close" onclick="closeDetail()">×</span>
    <div id="detailBody"></div>
  </div>
</div>

<div id="lightbox" onclick="this.style.display='none'">
  <img id="lightboxImg" src="" />
</div>

<div class="modal" id="formModal">
  <div class="modal-content">
    <span class="close" onclick="closeForm()">×</span>
    <h2>Post Your Product</h2>
    <input type="text" id="name" placeholder="Product Name" required />
    <input type="text" id="price" placeholder="Price" required />
    <input type="text" id="phone" placeholder="Phone Number" required />
    <select id="category">
      <option value="Phones">Phones</option>
      <option value="Cars">Cars</option>
      <option value="Kitchen">Kitchen</option>
      <option value="Electronics">Electronics</option>
      <option value="Furniture">Furniture</option>
      <option value="Others">Others</option>
    </select>
    <textarea id="description" placeholder="Description"></textarea>
    <input type="text" id="condition" placeholder="Condition (New/Used)" />
    <input type="text" id="specs" placeholder="Specifications" />
    <input type="text" id="region" placeholder="Location/Region" />
    <input type="file" id="imageFile" accept="image/*" multiple />
    <div id="imagePreviewContainer"></div>
    <button class="submit-btn" onclick="saveProduct()">Save Product</button>
  </div>
</div>

<!-- Firebase & JS logic stays the same, no change needed for search rendering -->
<script type="module">
  /* Your existing Firebase and product rendering JS here */
</script>
</body>
</html>
